{"version":3,"sources":["./src/app/promos/vendor/generate-coupon/generate-coupon.component.ts","./src/app/promos/vendor/generate-coupon/generate-coupon.component.html","./src/app/promos/vendor/promo-add/promo-add.component.ts","./src/app/promos/vendor/promo-add/promo-add.component.html","./src/app/promos/vendor/vendor.module.ts","./src/app/promos/vendor/promo-participants/promo-participants.component.ts","./src/app/promos/vendor/promo-participants/promo-participants.component.html","./src/app/promos/vendor/give-prize/give-prize.component.ts","./src/app/promos/vendor/give-prize/give-prize.component.html","./src/app/promos/vendor/vendor-promos/vendor-promos.component.ts","./src/app/promos/vendor/vendor-promos/vendor-promos.component.html","./src/app/promos/vendor/vendor-routing.module.ts","./src/app/promos/vendor/promo-edit/promo-edit.component.ts","./src/app/promos/vendor/promo-edit/promo-edit.component.html"],"names":[],"mappings":"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","file":"vendor-vendor-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { DocumentReference } from '@angular/fire/firestore';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { Subscription } from 'rxjs';\r\nimport { FireService } from 'src/app/fire.service';\r\nimport { AppState } from 'src/app/shared/app-state';\r\nimport { generateCouponCode } from 'src/app/shared/coupon-generator';\r\nimport { CouponDTO, CouponPoints } from 'src/app/shared/models/Coupon';\r\nimport { ParticipantDTO, PromoDTO } from 'src/app/shared/models/Promo';\r\nimport { CustomerDTO } from 'src/app/shared/models/User';\r\n\r\n@Component({\r\n  selector: 'app-generate-coupon',\r\n  templateUrl: './generate-coupon.component.html',\r\n  styleUrls: ['./generate-coupon.component.scss'],\r\n})\r\nexport class GenerateCouponComponent implements OnInit {\r\n  form: FormGroup = null;\r\n  code = '';\r\n  isOneCouponClose = false;\r\n  message: string = null;\r\n  messagePrize: string = null;\r\n  sub: Subscription = new Subscription();\r\n  private errors = '';\r\n  pid = null;\r\n  uid = null;\r\n\r\n  constructor(\r\n    private fire: FireService,\r\n    private router: Router,\r\n    private fb: FormBuilder,\r\n    public route: ActivatedRoute,\r\n    private store: Store<AppState>\r\n  ) {\r\n    this.form = this.fb.group({\r\n      promoId: [{ value: this.pid || 0, disabled: true }],\r\n      customerId: [{ value: this.uid || 0, disabled: true }],\r\n      points: [null, [Validators.min(1), Validators.required]],\r\n      code: [''],\r\n    });\r\n\r\n    this.sub.add(\r\n      this.route.queryParams.subscribe((data) => {\r\n        this.pid = data.pid;\r\n        this.uid = data.uid;\r\n\r\n        this.form = this.fb.group({\r\n          promoId: [{ value: this.pid, disabled: true }],\r\n          customerId: [{ value: this.uid, disabled: true }],\r\n          points: [null, [Validators.min(1), Validators.required]],\r\n          code: [''],\r\n        });\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n  generateCodeAndSubmit(): void {\r\n    this.message = '';\r\n    const couponPure: CouponDTO = this.configureCouponPureDTO();\r\n\r\n    this.fire\r\n      .getCouponsCollectionRef()\r\n      .add(couponPure)\r\n      .then((data: DocumentReference) => {\r\n        const couponId: string = data.id;\r\n        const newDocument = { ...couponPure, id: couponId };\r\n        const newDocumentPure = Object.assign({}, newDocument);\r\n\r\n        this.fire\r\n          .getCouponsCollectionRef()\r\n          .doc(couponId)\r\n          .set({ ...newDocumentPure })\r\n          .catch((e) => {})\r\n          .then(() => {\r\n            this.fire\r\n              .getUsersCollectionRef()\r\n              .doc(newDocumentPure.customerId)\r\n              .get()\r\n              .toPromise()\r\n              .catch((e) => {})\r\n              .then((customerData: any) => {\r\n                const customer = customerData.data() as CustomerDTO;\r\n                const updatedCoupons = [...customer.coupons, couponId];\r\n\r\n                const updatedCustomer = {\r\n                  ...customer,\r\n                  coupons: [...updatedCoupons],\r\n                };\r\n\r\n                const customerPureDTO: CustomerDTO = Object.assign(\r\n                  {},\r\n                  updatedCustomer\r\n                );\r\n\r\n                this.fire\r\n                  .getUsersCollectionRef()\r\n                  .doc(newDocumentPure.customerId)\r\n                  .set({ ...customerPureDTO })\r\n                  .catch((e) => {})\r\n                  .then(() => {\r\n                    this.composeFinalMessage();\r\n                  })\r\n                  .catch((e) => (this.errors += e));\r\n              })\r\n              .catch((e) => (this.errors += e));\r\n          })\r\n          .catch((e) => (this.errors += e));\r\n      })\r\n      .catch((e) => (this.errors += e))\r\n      .then(() => {\r\n        this.fire\r\n          .getPromosCollectionRef()\r\n          .doc(this.pid)\r\n          .get()\r\n          .toPromise()\r\n          .then((promoData: any) => {\r\n            const promo = promoData.data() as PromoDTO;\r\n            const participant: ParticipantDTO = {\r\n              ...promo.participantsTable.find(\r\n                (participant: ParticipantDTO) => participant.uid === this.uid\r\n              ),\r\n            };\r\n\r\n            if (participant) {\r\n              const participantCurrentPoints: number = parseInt(\r\n                `${participant.currentPoints}`,\r\n                0\r\n              );\r\n\r\n              const isOneCouponClose =\r\n                promo.pointsRedeem <=\r\n                couponPure.points + participantCurrentPoints;\r\n\r\n              if (isOneCouponClose) {\r\n                this.isOneCouponClose = isOneCouponClose;\r\n              }\r\n            }\r\n          })\r\n          .catch((e) => (this.errors += e));\r\n      })\r\n      .catch((e) => (this.errors += e));\r\n    console.log(this.errors);\r\n  }\r\n\r\n  private configureCouponPureDTO(): CouponDTO {\r\n    const code = generateCouponCode();\r\n    this.code = code;\r\n\r\n    const points = this.form.value['points'] || 0;\r\n    const promoId = this.pid;\r\n    const customerId = this.uid;\r\n\r\n    const coupon: CouponPoints = {\r\n      promoId,\r\n      customerId,\r\n      code,\r\n      points,\r\n      realised: false,\r\n      id: '',\r\n      type: 'points',\r\n    };\r\n\r\n    const couponPureDTO: CouponDTO = Object.assign({}, coupon);\r\n    return couponPureDTO;\r\n  }\r\n\r\n  private composeFinalMessage(): void {\r\n    if (this.errors.length) {\r\n      this.message += this.errors;\r\n    } else {\r\n      this.message =\r\n        'Kupon został pomyślnie wygenerowany i przypisany do konta Uczestnika (Klienta). Poinformuj go o tym i przypomnij, że realizację Kuponu należy wykonać w aplikacji.';\r\n\r\n      if (this.isOneCouponClose) {\r\n        this.messagePrize =\r\n          'UWAGA: Możesz wydać Klientowi nagrodę jeśli od razu odbierze punkty w aplikacji! Poinformuj go o tym.';\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"wrapper\">\r\n  <ng-container *ngIf=\"pid && uid\">\r\n    <form [formGroup]=\"form\" (ngSubmit)=\"generateCodeAndSubmit()\">\r\n      <div class=\"group\">\r\n        <label class=\"group__label\">Generowanie kuponu promocyjnego</label>\r\n        <div class=\"input-wrapper\">\r\n          <label class=\"label\" for=\"promoId\"> Id promocji </label>\r\n          <input\r\n            class=\"disabled\"\r\n            type=\"text\"\r\n            name=\"promoId\"\r\n            formControlName=\"promoId\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"input-wrapper\">\r\n          <label class=\"label\" for=\"customerId\"> Id uczestnika promocji </label>\r\n          <input\r\n            class=\"disabled\"\r\n            type=\"text\"\r\n            name=\"customerId\"\r\n            formControlName=\"customerId\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"input-wrapper\">\r\n          <label class=\"label\" for=\"points\">\r\n            Ilość punktów do przyznania uczestnikowi\r\n          </label>\r\n          <input\r\n            class=\"input\"\r\n            type=\"number\"\r\n            name=\"points\"\r\n            formControlName=\"points\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button class=\"buttons\" type=\"submit\" [disabled]=\"!form.valid\">\r\n          Generuj kupon\r\n        </button>\r\n\r\n        <div class=\"message-wrapper\" *ngIf=\"message\">\r\n          Wygenerowany kod realizacji: <span class=\"code\">{{ code }}</span>\r\n          <div class=\"message\" *ngIf=\"message\">\r\n            {{ message }}\r\n          </div>\r\n          <div class=\"message-prize\" *ngIf=\"messagePrize\">\r\n            {{ messagePrize }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-promo-add',\r\n  templateUrl: './promo-add.component.html',\r\n})\r\nexport class PromoAddComponent implements OnInit {\r\n  constructor() {}\r\n\r\n  ngOnInit(): void {}\r\n}\r\n","<app-promo-form [promo]=\"null\"></app-promo-form>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { VendorRoutingModule } from './vendor-routing.module';\r\nimport { GenerateCouponComponent } from './generate-coupon/generate-coupon.component';\r\nimport { PromoAddComponent } from './promo-add/promo-add.component';\r\nimport { PromoEditComponent } from './promo-edit/promo-edit.component';\r\nimport { PromoParticipantsComponent } from './promo-participants/promo-participants.component';\r\nimport { VendorPromosComponent } from './vendor-promos/vendor-promos.component';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { GivePrizeComponent } from './give-prize/give-prize.component';\r\n\r\nconst components = [\r\n  GenerateCouponComponent,\r\n  PromoAddComponent,\r\n  PromoEditComponent,\r\n  PromoParticipantsComponent,\r\n  VendorPromosComponent,\r\n  GivePrizeComponent,\r\n];\r\n\r\n@NgModule({\r\n  declarations: components,\r\n  imports: [\r\n    CommonModule,\r\n    VendorRoutingModule,\r\n    SharedModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n  ],\r\n  exports: components,\r\n})\r\nexport class VendorModule {}\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { DocumentData } from '@angular/fire/firestore';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { selectAuthUserProfile } from 'src/app/auth';\r\nimport { FireService } from 'src/app/fire.service';\r\nimport { AppState } from 'src/app/shared/app-state';\r\nimport { PromoDTO } from 'src/app/shared/models/Promo';\r\nimport { UserDTO } from 'src/app/shared/models/User';\r\n\r\n@Component({\r\n  selector: 'app-promo-participants',\r\n  templateUrl: './promo-participants.component.html',\r\n  styleUrls: ['./promo-participants.component.scss'],\r\n})\r\nexport class PromoParticipantsComponent implements OnInit {\r\n  @Input() tableName = '';\r\n  subscription: Subscription = new Subscription();\r\n  pid: string = null;\r\n\r\n  promo: PromoDTO = null;\r\n  user$: Observable<UserDTO> = this.store.select(selectAuthUserProfile);\r\n  promos$: Observable<\r\n    DocumentData[]\r\n  > = this.fire.getPromosCollectionRef().valueChanges();\r\n\r\n  constructor(\r\n    private fire: FireService,\r\n    private router: Router,\r\n    public route: ActivatedRoute,\r\n    private store: Store<AppState>\r\n  ) {\r\n    this.pid = this.route.snapshot.paramMap.get('pid');\r\n\r\n    this.subscription.add(\r\n      this.promos$.subscribe((promos) => {\r\n        let foundPromo = promos.find(\r\n          (promo: PromoDTO) => promo.pid === this.pid\r\n        );\r\n        this.promo = foundPromo as PromoDTO;\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }\r\n}\r\n","<div class=\"wrapper\">\r\n  <p class=\"table-name\">{{ tableName }}</p>\r\n\r\n  <table *ngIf=\"promo && promo.participantsTable as participants\" class=\"table\">\r\n    <!-- THEAD START -->\r\n    <thead class=\"table__head\">\r\n      <tr class=\"table__row table__row--head\">\r\n        <th class=\"cell cell--header\">\r\n          <label class=\"cell__label\"> Email uczestnika </label>\r\n        </th>\r\n\r\n        <th class=\"cell cell--header\">\r\n          <label class=\"cell__label\"> Aktualne punkty </label>\r\n        </th>\r\n\r\n        <th class=\"cell cell--header cell--metadata\">\r\n          <label class=\"cell__label\"> Ilość wręczonych nagród </label>\r\n        </th>\r\n\r\n        <th class=\"cell cell--actions\">\r\n          <label class=\"cell__label\"> Operacje - Uczestnicy </label>\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n\r\n    <!-- TBODY START -->\r\n    <tbody class=\"table__body\">\r\n      <tr\r\n        *ngFor=\"let participant of participants\"\r\n        class=\"table__row table__row--body\"\r\n      >\r\n        <td class=\"cell cell--data cell--participant-details\">\r\n          <label class=\"cell__label\"> {{ participant.email }} </label>\r\n        </td>\r\n\r\n        <td class=\"cell cell--data cell--participant-details\">\r\n          <label class=\"cell__label\">\r\n            {{ participant.currentPoints }} / {{ promo.pointsRedeem }}\r\n          </label>\r\n        </td>\r\n\r\n        <td class=\"cell cell--data cell--participant-details\">\r\n          <label class=\"cell__label\">\r\n            {{ participant.prizeCounter }}\r\n          </label>\r\n        </td>\r\n\r\n        <td class=\"cell cell--actions\">\r\n          <label\r\n            class=\"action-label action-label--edit\"\r\n            [routerLink]=\"['/vendor/promo/generate-coupon']\"\r\n            [queryParams]=\"{\r\n              pid: promo.pid,\r\n              uid: participant.uid\r\n            }\"\r\n          >\r\n            GENERUJ KUPON\r\n          </label>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {\r\n  DocumentData,\r\n  QueryDocumentSnapshot,\r\n  QuerySnapshot,\r\n} from '@angular/fire/firestore';\r\nimport {\r\n  FormBuilder,\r\n  FormControl,\r\n  FormGroup,\r\n  Validators,\r\n} from '@angular/forms';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { FireService } from 'src/app/fire.service';\r\nimport { COUPON_CODE_LENGTH } from 'src/app/shared/coupon-generator';\r\nimport { CouponDTO, CouponPrize } from 'src/app/shared/models/Coupon';\r\nimport { ParticipantDTO, PromoDTO } from 'src/app/shared/models/Promo';\r\n\r\n@Component({\r\n  selector: 'app-give-prize',\r\n  templateUrl: './give-prize.component.html',\r\n  styleUrls: ['./give-prize.component.scss'],\r\n})\r\nexport class GivePrizeComponent {\r\n  form: FormGroup;\r\n\r\n  verified = false;\r\n  coupon: CouponPrize = null;\r\n  alreadyRealised = false;\r\n  realisationComplete = false;\r\n\r\n  wrongCoupon = false;\r\n\r\n  constructor(\r\n    private fire: FireService,\r\n    private fb: FormBuilder,\r\n    public route: ActivatedRoute\r\n  ) {\r\n    let group = {};\r\n\r\n    group['code'] = new FormControl('', [\r\n      Validators.required,\r\n      Validators.minLength(COUPON_CODE_LENGTH),\r\n    ]);\r\n\r\n    this.form = this.fb.group(group);\r\n  }\r\n\r\n  verify() {\r\n    const { code } = this.form.getRawValue();\r\n\r\n    this.fire.db.firestore\r\n      .collection('coupons')\r\n      .where('type', '==', 'prize')\r\n      .where('code', '==', code)\r\n      .get()\r\n      .then((data: QuerySnapshot<DocumentData>) => {\r\n        console.log(data.empty);\r\n\r\n        if (data.empty === false) {\r\n          console.log('data', data.empty);\r\n\r\n          data.forEach((value: QueryDocumentSnapshot<DocumentData>) => {\r\n            console.log('data for each');\r\n            if (value) {\r\n              console.log('value');\r\n              const data = { ...value.data() };\r\n              this.coupon = data as CouponPrize;\r\n              this.coupon.type === 'prize'\r\n                ? (this.wrongCoupon = false)\r\n                : (this.wrongCoupon = true);\r\n            }\r\n          });\r\n        } else {\r\n          this.wrongCoupon = false;\r\n        }\r\n      })\r\n      .finally(() => {\r\n        if (this.coupon) {\r\n          this.verified = true;\r\n\r\n          if (this.coupon.realised) {\r\n            this.alreadyRealised = true;\r\n          }\r\n        } else {\r\n          this.wrongCoupon = true;\r\n        }\r\n      });\r\n  }\r\n\r\n  realise() {\r\n    let promo: PromoDTO = null;\r\n    let participant: ParticipantDTO = null;\r\n    if (this.coupon && this.coupon.realised === false) {\r\n      this.coupon.realised = true;\r\n      const updatedCoupon: CouponPrize = { ...this.coupon, realised: true };\r\n      const pureDTO: CouponDTO = Object.assign({}, updatedCoupon);\r\n\r\n      this.fire\r\n        .getCouponsCollectionRef()\r\n        .doc(pureDTO.id)\r\n        .set({ ...pureDTO })\r\n        .then(() => {});\r\n\r\n      this.fire\r\n        .getPromosCollectionRef()\r\n        .doc(pureDTO.promoId)\r\n        .get()\r\n        .toPromise()\r\n        .then((data: any) => {\r\n          promo = data.data() as PromoDTO;\r\n          promo.participantsTable.forEach((p: ParticipantDTO) => {\r\n            if (p.uid === pureDTO.customerId) {\r\n              p.prizeCounter += 1;\r\n            }\r\n          });\r\n        })\r\n        .then(() => {\r\n          const updatedPromo = Object.assign({}, { ...promo });\r\n\r\n          this.fire\r\n            .getPromosCollectionRef()\r\n            .doc(promo.pid)\r\n            .set({ ...updatedPromo })\r\n            .finally(() => {\r\n              this.realisationComplete = true;\r\n            });\r\n        });\r\n    }\r\n  }\r\n\r\n  updatePromo() {}\r\n}\r\n","<div class=\"wrapper\">\r\n  <form [formGroup]=\"form\" *ngIf=\"form\">\r\n    <div class=\"group\">\r\n      <label class=\"group__label\">Nagroda - Weryfikacja </label>\r\n\r\n      <section class=\"section\">\r\n        <p class=\"info\">\r\n          1. Poproś Uczestnika (Klienta) o podanie kodu kuponu z nagrodą.\r\n          Znajdzie go na swoim koncie w aplikacji.\r\n        </p>\r\n        <div class=\"input-wrapper\">\r\n          <label class=\"label\" for=\"code\"> Kod kuponu </label>\r\n          <input type=\"text\" name=\"code\" formControlName=\"code\" />\r\n        </div>\r\n\r\n        <button class=\"buttons\" [disabled]=\"!form.valid\" (click)=\"verify()\">\r\n          Zweryfikuj poprawność\r\n        </button>\r\n      </section>\r\n      <section class=\"section section--flex-start\">\r\n        <ng-container *ngIf=\"wrongCoupon\">\r\n          <p class=\"info info--coupon margin\">\r\n            2. Niepoprawny kod lub typ kuponu.\r\n          </p>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"verified && !alreadyRealised\">\r\n          <p class=\"info margin\" *ngIf=\"coupon\">\r\n            <span class=\"info--coupon\">Nagroda:</span>\r\n            {{ coupon?.prize?.description }}\r\n            <span class=\"info--coupon\" *ngIf=\"coupon.prize.quantity\">\r\n              Ilość:\r\n            </span>\r\n            {{ coupon?.prize?.quantity }}\r\n          </p>\r\n          <p class=\"info margin\">\r\n            2. Dopytaj Klienta, czy chce zrealizować nagrodę już teraz oraz\r\n            poinformuj o nagrodzie. Jeśli nagroda posiada rodzaje, dopytaj\r\n            Klienta który wariant woli dostać. Jeśli Klient wyraził zgodę i\r\n            wybrał nagrodę - wydaj mu ją i wciśnij poniższy przycisk \"ZREALIZUJ\r\n            - WYDANO NAGRODĘ\".\r\n          </p>\r\n\r\n          <button\r\n            class=\"buttons margin\"\r\n            type=\"submit\"\r\n            [disabled]=\"!form.valid\"\r\n            *ngIf=\"verified\"\r\n            (click)=\"realise()\"\r\n          >\r\n            Zrealizuj - nagrodę wydano\r\n          </button>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"verified && alreadyRealised\">\r\n          <p class=\"info margin\">\r\n            2. Kupon został już zrealizowany. Poinformuj o tym klienta.\r\n          </p>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"realisationComplete\">\r\n          <p class=\"info info--coupon margin\">Operacja zakończona sukcesem.</p>\r\n        </ng-container>\r\n      </section>\r\n    </div>\r\n  </form>\r\n</div>\r\n","import { Component, Input, OnInit } from '@angular/core';\r\nimport { DocumentData, QuerySnapshot } from '@angular/fire/firestore';\r\nimport { Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { User } from 'firebase';\r\nimport { Observable } from 'rxjs';\r\nimport { selectAuthUserProfile } from 'src/app/auth';\r\nimport { AuthService } from 'src/app/auth/auth.service';\r\nimport { FireService } from 'src/app/fire.service';\r\nimport { AppState } from 'src/app/shared/app-state';\r\nimport { CouponDTO } from 'src/app/shared/models/Coupon';\r\nimport { PromoDTO } from 'src/app/shared/models/Promo';\r\nimport { CustomerDTO, UserDTO } from 'src/app/shared/models/User';\r\n\r\n@Component({\r\n  selector: 'app-vendor-promos',\r\n  templateUrl: './vendor-promos.component.html',\r\n  styleUrls: ['./vendor-promos.component.scss'],\r\n})\r\nexport class VendorPromosComponent implements OnInit {\r\n  user$: Observable<UserDTO> = this.store.select(selectAuthUserProfile);\r\n  vendorId = '';\r\n  @Input() customerId = '';\r\n  @Input() tableName = 'PROMOCJE TWOJEGO SKLEPU';\r\n\r\n  promos$: Observable<\r\n    DocumentData[] | PromoDTO[]\r\n  > = this.fire.getPromosCollectionRef().valueChanges();\r\n  promos: DocumentData[] | PromoDTO[];\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private fire: FireService,\r\n    public auth: AuthService,\r\n    private store: Store<AppState>\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.store.select(selectAuthUserProfile).subscribe((data) => {\r\n      if (data && data.uid) {\r\n        this.vendorId = data.uid;\r\n        this.promos$.subscribe((promos) => {\r\n          if (this.vendorId) {\r\n            this.promos = promos.filter(\r\n              (promo: PromoDTO) => promo.vendorId === this.vendorId\r\n            );\r\n          } else {\r\n            this.promos = promos;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  delete(promo: PromoDTO) {\r\n    console.log('PROMO TO DELETE', promo.pid);\r\n    let promises: Promise<any>[] = [];\r\n    let promises2: Promise<any>[] = [];\r\n    if (confirm('Czy na pewno chcesz usunąć promocję?')) {\r\n      this.fire\r\n        .getPromosCollectionRef()\r\n        .doc(promo.pid)\r\n        .get()\r\n        .toPromise()\r\n        .then(() => {\r\n          var promoCouponsQuery = this.fire.db.firestore\r\n            .collection('coupons')\r\n            .where('promoId', '==', promo.pid);\r\n\r\n          let couponUsers: {\r\n            coupon: CouponDTO;\r\n            couponRef;\r\n            userId: string;\r\n          }[] = [];\r\n\r\n          promoCouponsQuery\r\n            .get()\r\n            .then(function (querySnapshot) {\r\n              querySnapshot.forEach(function (doc) {\r\n                couponUsers.push({\r\n                  coupon: doc.data() as CouponDTO,\r\n                  couponRef: doc.ref,\r\n                  userId: (doc.data() as CouponDTO).customerId,\r\n                });\r\n              });\r\n            })\r\n            .then(() => {\r\n              const uniqueUsersToUpdate = new Set([\r\n                ...couponUsers.map(({ userId }) => userId),\r\n              ]);\r\n\r\n              uniqueUsersToUpdate.forEach((user) => {\r\n                promises.push(\r\n                  this.fire.db.firestore\r\n                    .collection('users')\r\n                    .where('uid', '==', user)\r\n                    .get()\r\n                );\r\n              });\r\n\r\n              let usersDTOsToBeUpdated: UserDTO[] = [];\r\n\r\n              Promise.all(promises)\r\n                .then((values: [QuerySnapshot<DocumentData[]>]) => {\r\n                  console.log(values);\r\n                  values.forEach((value: QuerySnapshot<DocumentData[]>) => {\r\n                    if (value) {\r\n                      value.forEach((v: DocumentData) => {\r\n                        const data = { ...v.data() };\r\n                        usersDTOsToBeUpdated.push(data);\r\n                      });\r\n                    }\r\n                  });\r\n                })\r\n                .then(() => {\r\n                  usersDTOsToBeUpdated.forEach((user: CustomerDTO) => {\r\n                    const updatedPromos: string[] = user.promos.filter(\r\n                      (p) => p !== promo.pid\r\n                    );\r\n\r\n                    const couponsToDel = couponUsers.filter(\r\n                      (u) => u.userId === user.uid\r\n                    );\r\n\r\n                    const couponsToDelIds = couponsToDel.map(\r\n                      (u) => u.coupon.id\r\n                    );\r\n\r\n                    let newCoupons = [];\r\n\r\n                    user.coupons.forEach((uc: string) => {\r\n                      if (!couponsToDelIds.includes(uc)) {\r\n                        newCoupons.push(uc);\r\n                      }\r\n                    });\r\n\r\n                    const updatedUser: CustomerDTO = {\r\n                      ...user,\r\n                      promos: updatedPromos,\r\n                      coupons: newCoupons,\r\n                    };\r\n\r\n                    const updatedUserPure = Object.assign({}, updatedUser);\r\n\r\n                    promises2.push(\r\n                      this.fire\r\n                        .getUsersCollectionRef()\r\n                        .doc(updatedUser.uid)\r\n                        .set({ ...updatedUserPure })\r\n                    );\r\n                  });\r\n                })\r\n                .then(() => {\r\n                  Promise.all(promises2).then((data) => {\r\n                    couponUsers.forEach((cu) => {\r\n                      cu.couponRef.delete();\r\n                    });\r\n                  });\r\n                })\r\n                .then(() => {\r\n                  this.fire.getPromosCollectionRef().doc(promo.pid).delete();\r\n                });\r\n            });\r\n        })\r\n        .catch((err) => console.error(err));\r\n    }\r\n  }\r\n\r\n  edit(promo: PromoDTO) {\r\n    this.router.navigate(['promos/edit-promo', { pid: promo.pid }]);\r\n  }\r\n}\r\n","<ng-container *ngIf=\"user$ | async as user\">\r\n  <div class=\"wrapper\">\r\n    <p class=\"table__name\">\r\n      {{ tableName }}\r\n    </p>\r\n    <ng-container *ngIf=\"promos && promos.length\">\r\n      <table class=\"table\">\r\n        <!-- THEAD START -->\r\n        <thead class=\"table__head\">\r\n          <tr class=\"table__row table__row--head\">\r\n            <th class=\"cell cell--header cell--promo-details cell--promo-name\">\r\n              <label class=\"cell__label\"> Nazwa promocji </label>\r\n            </th>\r\n\r\n            <th\r\n              class=\"cell cell--header cell--promo-details cell--promo-description\"\r\n            >\r\n              <label class=\"cell__label\"> Opis promocji </label>\r\n            </th>\r\n\r\n            <th class=\"cell cell--header cell--prize cell--prize-description\">\r\n              <label class=\"cell__label\">Opis nagrody</label>\r\n            </th>\r\n\r\n            <th class=\"cell cell--header cell--prize cell--quantity\">\r\n              <label class=\"cell__label\"> Ilość (nagrody) </label>\r\n            </th>\r\n\r\n            <th class=\"cell cell--header cell--points\">\r\n              <label class=\"cell__label\"> Punkty startowe </label>\r\n            </th>\r\n            <th class=\"cell cell--header cell--points\">\r\n              <label class=\"cell__label\"> Punkty wymagane </label>\r\n            </th>\r\n\r\n            <th\r\n              class=\"cell cell--header cell--participants cell--participants-total\"\r\n            >\r\n              <label class=\"cell__label\"> Aktywni uczestnicy </label>\r\n            </th>\r\n\r\n            <th class=\"cell cell--actions\">\r\n              <label class=\"cell__label\"> Operacje - Promocje</label>\r\n            </th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <!-- TBODY START -->\r\n        <tbody class=\"table__body\">\r\n          <tr *ngFor=\"let promo of promos\" class=\"table__row table__row--body\">\r\n            <td class=\"cell cell--data cell--promo-details cell--promo-name\">\r\n              <label class=\"cell__label\"> {{ promo.promoName }} </label>\r\n            </td>\r\n\r\n            <td\r\n              class=\"cell cell--data cell--promo-details cell--promo-description\"\r\n            >\r\n              <label class=\"cell__label\">\r\n                {{ promo.promoDescription }}\r\n              </label>\r\n            </td>\r\n\r\n            <td class=\"cell cell--data cell--prize cell--prize-description\">\r\n              <label class=\"cell__label\"> {{ promo.prizeDescription }} </label>\r\n            </td>\r\n\r\n            <td class=\"cell cell--data cell--prize cell--quantity\">\r\n              <label class=\"cell__label\"> {{ promo.prizeQuantity }} </label>\r\n            </td>\r\n            <td class=\"cell cell--data cell--points\">\r\n              <label class=\"cell__label\">\r\n                {{ promo.pointsEntry }}\r\n              </label>\r\n            </td>\r\n            <td class=\"cell cell--data cell--points\">\r\n              <label class=\"cell__label\">\r\n                {{ promo.pointsRedeem }}\r\n              </label>\r\n            </td>\r\n\r\n            <td\r\n              class=\"cell cell--data cell--participants cell--participants-total\"\r\n            >\r\n              <label class=\"cell__label\">\r\n                {{ promo.participantsTotal }}\r\n              </label>\r\n              <label\r\n                class=\"action-label action-label--list\"\r\n                [routerLink]=\"['/vendor/promo/participants', promo.pid]\"\r\n              >\r\n                Lista\r\n              </label>\r\n            </td>\r\n\r\n            <td class=\"cell cell--actions\">\r\n              <label\r\n                class=\"action-label action-label--edit\"\r\n                [routerLink]=\"['/vendor/promo/edit', promo.pid]\"\r\n              >\r\n                EDYTUJ\r\n              </label>\r\n              <label\r\n                class=\"action-label action-label--delete\"\r\n                (click)=\"delete(promo)\"\r\n              >\r\n                USUŃ\r\n              </label>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </ng-container>\r\n  </div>\r\n</ng-container>\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { AuthGuard } from 'src/app/auth/auth.guard';\r\nimport { GenerateCouponComponent } from './generate-coupon/generate-coupon.component';\r\nimport { GivePrizeComponent } from './give-prize/give-prize.component';\r\nimport { PromoAddComponent } from './promo-add/promo-add.component';\r\nimport { PromoEditComponent } from './promo-edit/promo-edit.component';\r\nimport { PromoParticipantsComponent } from './promo-participants/promo-participants.component';\r\nimport { VendorPromosComponent } from './vendor-promos/vendor-promos.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    children: [\r\n      {\r\n        path: 'promos',\r\n        component: VendorPromosComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n      {\r\n        path: 'promos/add',\r\n        component: PromoAddComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n\r\n      {\r\n        path: 'promo/edit/:pid',\r\n        component: PromoEditComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n\r\n      {\r\n        path: 'promo/participants/:pid',\r\n        component: PromoParticipantsComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n\r\n      {\r\n        path: 'promo/generate-coupon',\r\n        component: GenerateCouponComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n\r\n      {\r\n        path: 'promo/give-prize',\r\n        component: GivePrizeComponent,\r\n        canActivate: [AuthGuard],\r\n        data: {\r\n          exptectedRoles: ['vendor'],\r\n        },\r\n      },\r\n    ],\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class VendorRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { DocumentData } from '@angular/fire/firestore';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Store } from '@ngrx/store';\r\nimport { Observable } from 'rxjs';\r\nimport { FireService } from 'src/app/fire.service';\r\nimport { AppState } from 'src/app/shared/app-state';\r\nimport { PromoDTO } from 'src/app/shared/models/Promo';\r\n\r\n@Component({\r\n  selector: 'app-promo-edit',\r\n  templateUrl: './promo-edit.component.html',\r\n})\r\nexport class PromoEditComponent implements OnInit {\r\n  promo: PromoDTO = null;\r\n  promos$: Observable<\r\n    DocumentData[]\r\n  > = this.fire.getPromosCollectionRef().valueChanges();\r\n  pid: string = null;\r\n\r\n  constructor(\r\n    public router: Router,\r\n    public route: ActivatedRoute,\r\n    private store: Store<AppState>,\r\n    private fire: FireService\r\n  ) {\r\n    const pid = this.route.snapshot.paramMap.get('pid');\r\n    this.pid = pid;\r\n\r\n    this.promos$.subscribe((promos) => {\r\n      let foundPromo = promos.find((promo: PromoDTO) => promo.pid === this.pid);\r\n      this.promo = foundPromo as PromoDTO;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  userEdit(event) {}\r\n}\r\n","<ng-container *ngIf=\"promo\">\r\n  <app-promo-form [promo]=\"promo\" (userEdit)=\"userEdit($event)\">\r\n  </app-promo-form>\r\n</ng-container>\r\n"],"sourceRoot":"webpack:///"}